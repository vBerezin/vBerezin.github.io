{"version":3,"sources":["webpack://[name]/./common/classes/class-input-file.js"],"names":["InputFile","input","options","values","buttonText","clearText","wrapper","makeWrapper","button","makeButton","clear","makeClear","addEventListener","files","length","innerHTML","name","classList","add","remove","onChange","parentNode","appendChild","document","createElement","className","btn","onclick","event","click","preventDefault","value"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;IACMA,S;;;AACJ,qBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA;;AAC1B,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKE,MAAL,GAAc,IAAd;AACA,SAAKD,OAAL,GAAe,SAAc;AAC3BE,gBAAU,EAAE,QADe;AAE3BC,eAAS,EAAE;AAFgB,KAAd,EAGZH,OAAO,IAAI,EAHC,CAAf;AAIA,SAAKI,OAAL,GAAe,KAAKC,WAAL,EAAf;AACA,SAAKC,MAAL,GAAc,KAAKC,UAAL,EAAd;AACA,SAAKC,KAAL,GAAa,KAAKC,SAAL,EAAb;AACAV,SAAK,CAACW,gBAAN,CAAuB,QAAvB,EAAiC,YAAM;AAAA,UAC7BC,KAD6B,GACnBZ,KADmB,CAC7BY,KAD6B;;AAErC,UAAIA,KAAK,CAACC,MAAV,EAAkB;AAChB,aAAI,CAACX,MAAL,GAAcU,KAAd;AACA,aAAI,CAACL,MAAL,CAAYO,SAAZ,GAAwBF,KAAK,CAAC,CAAD,CAAL,CAASG,IAAjC;;AACA,aAAI,CAACV,OAAL,CAAaW,SAAb,CAAuBC,GAAvB,CAA2B,UAA3B;AACD,OAJD,MAIO;AACL,aAAI,CAACf,MAAL,GAAc,IAAd;AACA,aAAI,CAACK,MAAL,CAAYO,SAAZ,GAAwB,KAAI,CAACb,OAAL,CAAaE,UAArC;;AACA,aAAI,CAACE,OAAL,CAAaW,SAAb,CAAuBE,MAAvB,CAA8B,UAA9B;AACD;;AACD,UAAI,OAAO,KAAI,CAACC,QAAZ,KAAyB,UAA7B,EAAyC,KAAI,CAACA,QAAL;AAC1C,KAZD;AAaA,SAAKnB,KAAL,CAAWoB,UAAX,CAAsBC,WAAtB,CAAkC,KAAKhB,OAAvC;AACA,SAAKA,OAAL,CAAagB,WAAb,CAAyB,KAAKrB,KAA9B;AACA,SAAKK,OAAL,CAAagB,WAAb,CAAyB,KAAKd,MAA9B;AACA,SAAKF,OAAL,CAAagB,WAAb,CAAyB,KAAKZ,KAA9B;AACD;;;;kCAEa;AACZ,UAAMJ,OAAO,GAAGiB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;AACAlB,aAAO,CAACmB,SAAR,GAAoB,cAApB;AACA,aAAOnB,OAAP;AACD;;;iCAEY;AAAA;;AACX,UAAMoB,GAAG,GAAGH,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAZ;AACAE,SAAG,CAACD,SAAJ,GAAgB,mBAAhB;AACAC,SAAG,CAACX,SAAJ,GAAgB,KAAKb,OAAL,CAAaE,UAA7B;;AACAsB,SAAG,CAACC,OAAJ,GAAc,UAACC,KAAD,EAAW;AACvB,cAAI,CAAC3B,KAAL,CAAW4B,KAAX;;AACAD,aAAK,CAACE,cAAN;AACD,OAHD;;AAIA,aAAOJ,GAAP;AACD;;;gCAEW;AAAA;;AACV,UAAMA,GAAG,GAAGH,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAZ;AACAE,SAAG,CAACD,SAAJ,GAAgB,qBAAhB;AACAC,SAAG,CAACX,SAAJ,GAAgB,KAAKb,OAAL,CAAaG,SAA7B;;AACAqB,SAAG,CAACC,OAAJ,GAAc,UAACC,KAAD,EAAW;AACvB,cAAI,CAAC3B,KAAL,CAAW8B,KAAX,CAAiB,EAAjB;;AACAH,aAAK,CAACE,cAAN;AACA,YAAI,OAAO,MAAI,CAACV,QAAZ,KAAyB,UAA7B,EAAyC,MAAI,CAACA,QAAL;AAC1C,OAJD;;AAKA,aAAOM,GAAP;AACD;;;+BAEU;AACT,aAAO,KAAP;AACD;;;;;;AAGY1B,wEAAf,E","file":"input-file.js","sourcesContent":["// TODO: multiple, images\r\nclass InputFile {\r\n  constructor(input, options) {\r\n    this.input = input;\r\n    this.values = null;\r\n    this.options = Object.assign({\r\n      buttonText: 'Browse',\r\n      clearText: 'Remove',\r\n    }, options || {});\r\n    this.wrapper = this.makeWrapper();\r\n    this.button = this.makeButton();\r\n    this.clear = this.makeClear();\r\n    input.addEventListener('change', () => {\r\n      const { files } = input;\r\n      if (files.length) {\r\n        this.values = files;\r\n        this.button.innerHTML = files[0].name;\r\n        this.wrapper.classList.add('has-file');\r\n      } else {\r\n        this.values = null;\r\n        this.button.innerHTML = this.options.buttonText;\r\n        this.wrapper.classList.remove('has-file');\r\n      }\r\n      if (typeof this.onChange === 'function') this.onChange();\r\n    });\r\n    this.input.parentNode.appendChild(this.wrapper);\r\n    this.wrapper.appendChild(this.input);\r\n    this.wrapper.appendChild(this.button);\r\n    this.wrapper.appendChild(this.clear);\r\n  }\r\n\r\n  makeWrapper() {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.className = 'c-input-file';\r\n    return wrapper;\r\n  }\r\n\r\n  makeButton() {\r\n    const btn = document.createElement('button');\r\n    btn.className = 'c-input-file__btn';\r\n    btn.innerHTML = this.options.buttonText;\r\n    btn.onclick = (event) => {\r\n      this.input.click();\r\n      event.preventDefault();\r\n    };\r\n    return btn;\r\n  }\r\n\r\n  makeClear() {\r\n    const btn = document.createElement('button');\r\n    btn.className = 'c-input-file__clear';\r\n    btn.innerHTML = this.options.clearText;\r\n    btn.onclick = (event) => {\r\n      this.input.value('');\r\n      event.preventDefault();\r\n      if (typeof this.onChange === 'function') this.onChange();\r\n    };\r\n    return btn;\r\n  }\r\n\r\n  onChange() {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default InputFile;\r\n"],"sourceRoot":""}