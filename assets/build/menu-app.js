(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[5],{274:function(n,t,e){"use strict";function i(){return(i=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n}).apply(this,arguments)}function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}e.r(t);var c=function(){function n(t,e){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!t||"object"!==o(t))return new Error("data must be JSON");this.options=i({title:"Меню",dropdownBtn:'<svg class="c-icon c-icon-svg c-icon-svg-right"><use xlink:href="/assets/images/icons.svg#right"></use></svg>',closeBtn:'<svg class="c-icon c-icon-svg c-icon-svg-close"><use xlink:href="/assets/images/icons.svg#close"></use></svg>',backBtn:'<svg class="c-icon c-icon-svg c-icon-svg-left"><use xlink:href="/assets/images/icons.svg#left"></use></svg>',onOpen:function(){return!1},onClose:function(){return!1}},e),this.data=t,this.active=!1,this.current=[],this.menu=this.createMenu(),this.overlay=this.makeOverlay()}var t,e,c;return t=n,(e=[{key:"makeItem",value:function(n,t){var e="".concat(50*t,"ms"),i='data-action="dropdown" data-index="'.concat(t,'"'),o=n.active?"is-active":"",a="",c="",s='<span class="c-menu-app__item-link">'.concat(n.title,"</span>");(n.children&&(a="has-dropdown",c="<button ".concat(i,' class="c-menu-app__toggle">').concat(this.options.dropdownBtn,"</button>"),s="<span ".concat(i,' class="c-menu-app__item-link">').concat(n.title,"</span>")),!n.active&&n.url)&&[window.location.href,window.location.pathname+window.location.search,window.location.pathname].forEach(function(t){return t===n.url?o="is-active":t});return n.url&&(s='<a class="c-menu-app__item-link" href="'.concat(n.url,'">').concat(n.title,"</a>")),'<div class="c-menu-app__item '.concat(o," ").concat(a,'" \n            style="animation-delay:').concat(e,'">').concat(s).concat(c,"</div>")}},{key:"makeList",value:function(n){var t=this,e=n.map(function(n,e){return"<li>".concat(t.makeItem(n,e),"</li>")});return"<ul>".concat(e.join(""),"</ul>")}},{key:"getItem",value:function(n){var t=this.data;return n.forEach(function(n){var e=t[n];t.children&&t.children[n]&&t.children[n].children&&(e=t.children[n]),e&&(t=e)}),t}},{key:"render",value:function(n,t){var e='<button class="c-menu-app__back" \n                    data-action="back">'.concat(this.options.backBtn,"</button>");return this.current.length||(e=""),'<div class="c-menu-app__head">'.concat(e,'\n            <button class="c-menu-app__close"\n                data-action="close">').concat(this.options.closeBtn,'</button>\n            <div class="c-menu-app__title" \n                data-action="back">').concat(n||this.options.title,'</div>\n            </div>\n            <div class="c-menu-app__body"><div class="c-menu-app__nav">').concat(t,"</div></div>")}},{key:"open",value:function(n){return!!this.menu&&(this.menu.classList.add("is-active"),this.active=!0,this.menu.style.display="block",this.overlay.style.display="block",document.body.style.overflow="hidden",n&&"function"==typeof n&&n(this.menu),"function"==typeof this.options.onOpen&&this.options.onOpen(this.menu),this.menu)}},{key:"close",value:function(n){return!!this.menu&&(this.menu.classList.remove("is-active"),this.active=!1,this.menu.style.display="none",this.overlay.style.display="none",document.body.style.overflow="",n&&"function"==typeof n&&n(this.menu),"function"==typeof this.options.onClose&&this.options.onClose(this.menu),this.menu)}},{key:"bindEvents",value:function(n){var t=this,e={dropdown:function(n){var e=n.dataset.index;t.current.push(e);var i=t.getItem(t.current);return t.menu.innerHTML=t.render(i.title,t.makeList(i.children)),t.menu},back:function(){if(!t.current.length)return!1;t.current.pop();var n=t.getItem(t.current),e=n.children||n,i=n.title||t.options.title;return t.menu.innerHTML=t.render(i,t.makeList(e)),t.menu},close:function(){return t.close()}};n.addEventListener("click",function(t){for(var i=t.target;i!==n;){if(i.dataset&&i.dataset.action){var o=i.dataset.action;e[o]&&e[o](i),t.preventDefault();break}i=i.parentNode}})}},{key:"makeOverlay",value:function(){var n=this,t=document.createElement("div");return t.className="c-menu-app-overlay",t.style.display="none",this.overlay=t,this.overlay.onclick=function(){n.close()},t}},{key:"createMenu",value:function(){return this.menu=document.createElement("nav"),this.menu.className="c-menu-app",this.menu.style.display="none",this.menu.innerHTML=this.render(this.options.title,this.makeList(this.data)),this.bindEvents(this.menu),this.menu}}])&&a(t.prototype,e),c&&a(t,c),n}();t.default=c}}]);